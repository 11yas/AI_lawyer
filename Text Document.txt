import re

def expand_query(q: str) -> str:
    synonyms = {
        # === Преступления и правонарушения ===
        "кража": ["хищение", "воровство", "угон", "незаконное изъятие имущества", "присвоение"],
        "грабеж": ["разбой", "насильственное хищение", "открытое похищение имущества"],
        "убийство": ["лишение жизни", "умышленное причинение смерти", "посягательство на жизнь"],
        "вымогательство": ["шантаж", "принуждение к передаче имущества", "угроза насилием"],
        "взятка": ["подкуп", "незаконное вознаграждение", "коррупция"],
        "мошенничество": ["обман", "незаконное присвоение", "подделка", "фиктивные сделки"],
        "наркотики": ["наркотические вещества", "контрабанда наркотиков", "незаконный оборот наркотиков"],
        "насилие": ["применение силы", "физическое воздействие", "угроза жизни"],

        # === Ответственность и наказание ===
        "наказание": ["ответственность", "санкция", "штраф", "уголовное наказание", "административная мера"],
        "штраф": ["денежное взыскание", "пеня", "административный штраф"],
        "ответственность": ["санкции", "обязанность возместить ущерб", "мера наказания"],

        # === Гражданское право ===
        "договор": ["соглашение", "контракт", "обязательство", "правовой акт"],
        "договор поставки": ["контракт на поставку", "поставка товаров", "коммерческая сделка"],
        "обязательство": ["долг", "договорная обязанность", "выполнение условий"],
        "расторжение": ["аннулирование", "прекращение действия", "отмена договора"],
        "неустойка": ["штрафная санкция", "пеня", "денежное взыскание"],
        "ущерб": ["вред", "потери", "материальный убыток", "компенсация"],

        # === Трудовое право ===
        "увольнение": ["расторжение трудового договора", "прекращение работы", "освобождение от должности"],
        "зарплата": ["заработная плата", "оплата труда", "денежное вознаграждение"],
        "отпуск": ["ежегодный отдых", "отгул", "временное освобождение от работы"],
        "работодатель": ["организация", "фирма", "компания", "наниматель"],
        "работник": ["служащий", "сотрудник", "трудящийся"],

        # === Коммерческое и налоговое право ===
        "налог": ["обязательный платеж", "сбор", "пошлина"],
        "налогоплательщик": ["организация", "гражданин", "предприниматель"],
        "банкротство": ["несостоятельность", "ликвидация компании", "финансовая неплатежеспособность"],
        "компания": ["организация", "фирма", "предприятие", "юридическое лицо"],
        "должник": ["обязанное лицо", "заемщик", "дебитор"],
        "кредитор": ["взыскатель", "лицо, предоставившее заём"],

        # === Административное и процессуальное право ===
        "суд": ["судебный орган", "правосудие", "судья"],
        "закон": ["нормативный акт", "кодекс", "правило", "законодательство"],
        "прокуратура": ["надзорный орган", "государственный обвинитель"],
        "жалоба": ["апелляция", "обращение", "ходатайство"],
        "полиция": ["правоохранительные органы", "служба охраны порядка"],

        # === Бытовые понятия ===
        "магазин": ["торговый объект", "супермаркет", "торговая точка"],
        "имущество": ["вещи", "собственность", "материальные ценности"],
        "деньги": ["наличные", "финансы", "средства"],
        "долг": ["задолженность", "обязательство выплатить", "финансовая обязанность"],
        "обман": ["мошенничество", "ложь", "введение в заблуждение"],
    }

    q = q.lower()
    expanded_terms = set(re.findall(r"\w+", q))  # изначальные слова (чтобы не дублировать)

    for word, syns in synonyms.items():
        if word in q:
            for s in syns:
                # Добавляем только новые слова, которых ещё нет
                for token in re.findall(r"\w+", s):
                    if token not in expanded_terms:
                        expanded_terms.add(token)

    # Собираем обратно в строку
    expanded_query = q + " " + " ".join(sorted(expanded_terms))
    return expanded_query.strip()
